{{#if description}}
/**
 * {{{description}}}
 */
{{/if}}
public sealed interface {{name}}{{implementations}} {
    fun toJson(): Map<String, Any?>

    companion object {
        fun fromJson(json: Map<String, Any?>): {{name}} {
            return when (json["__typename"] as String?) {
{{#each concreteMembers}}
{{#if isNested}}
                "{{typeName}}" -> {{wrapperName}}({{delegateTo}}.fromJson(json))
{{else}}
                "{{typeName}}" -> {{delegateTo}}.fromJson(json)
{{/if}}
{{/each}}
                else -> throw IllegalArgumentException("Unknown __typename for {{name}}: ${json["__typename"]}")
            }
        }
    }
{{#each nestedUnionWrappers}}

    data class {{wrapperName}}(val value: {{unionName}}) : {{parentUnionName}} {
        override fun toJson() = value.toJson()
    }
{{/each}}
}
